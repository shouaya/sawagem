import React, { Component } from 'react';
import CustomMenu from './components/CustomMenu';
import { Link } from 'react-router-dom'
import { Menu, Button } from 'semantic-ui-react'

class Toolbar extends Component {

  constructor (props) {
	super(props)
	this.handleItemClick = (e, { name }) => this.setState({ activeItem: name })
	this.state = {activeItem: ""}
  }
  
  render() {
	  const { activeItem } = this.state
	  if(this.props.user === undefined || this.props.user === null){
	      return (<Menu inverted pointing secondary>
	              <Menu.Menu position='right'>
	                <Menu.Item as={Link} to='/login'> 
	                  <Button primary >Sign In</Button>
	                </Menu.Item>
	                <Menu.Item as={Link} to='/regist'> 
                      <Button primary >Sign Up</Button>
                    </Menu.Item>
	            </Menu.Menu>
	          </Menu>)
	  }
	  const admin = this.props.user.role === "ADMIN"
	  return(
	  <Menu inverted pointing secondary>
		{{# sheet_arr}}
			<Menu.Item style={ {display: admin ? 'block' : 'none'} } name='{{resource_path}}' active={activeItem === '{{resource_path}}'} as={Link} to='/{{resource_path}}' onClick={this.handleItemClick} >{{model_title}}</Menu.Item>
		{{/ sheet_arr}}
		<CustomMenu activeItem={activeItem} onClick={this.handleItemClick} user={this.props.user} />
		<Menu.Menu position='right'>
		    <Menu.Item as={Link} to='/logout'> 
		      <Button primary >Sign out</Button>
		    </Menu.Item>
		</Menu.Menu>
	  </Menu>
	 )
  }
}

export default Toolbar;
